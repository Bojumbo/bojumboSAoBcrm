# –ü—ñ–¥—Å—É–º–æ–∫ CRM Backend –ø—Ä–æ–µ–∫—Ç—É

–¶–µ–π –¥–æ–∫—É–º–µ–Ω—Ç –º—ñ—Å—Ç–∏—Ç—å –ø–æ–≤–Ω–∏–π –æ–≥–ª—è–¥ —Å—Ç–≤–æ—Ä–µ–Ω–æ–≥–æ CRM Backend –ø—Ä–æ–µ–∫—Ç—É –∑ –¥–µ—Ç–∞–ª—å–Ω–∏–º –æ–ø–∏—Å–æ–º –≤—Å—ñ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤ —Ç–∞ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—ñ.

## üéØ –ú–µ—Ç–∞ –ø—Ä–æ–µ–∫—Ç—É

–°—Ç–≤–æ—Ä–∏—Ç–∏ –ø–æ–≤–Ω–æ—Ü—ñ–Ω–Ω–∏–π –±–µ–∫–µ–Ω–¥ —Ç–∞ –±–∞–∑—É –¥–∞–Ω–∏—Ö –¥–ª—è —ñ—Å–Ω—É—é—á–æ–≥–æ React CRM-–¥–æ–¥–∞—Ç–∫—É, —è–∫–∏–π —Ç–æ—á–Ω–æ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è–º —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—É —Ç–∞ –º–æ–∂–µ –±—É—Ç–∏ –∑–∞–ø—É—â–µ–Ω–∏–π –±–µ–∑ –±—É–¥—å-—è–∫–∏—Ö –∑–º—ñ–Ω –Ω–∞ —Å—Ç–æ—Ä–æ–Ω—ñ –∫–ª—ñ—î–Ω—Ç–∞.

## üèóÔ∏è –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞

### –¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—á–Ω–∏–π —Å—Ç–µ–∫

- **Runtime**: Node.js 18+
- **Framework**: Express.js 4.18+
- **Database**: PostgreSQL 12+
- **ORM**: Prisma 5.10+
- **Language**: TypeScript 5.3+
- **Authentication**: JWT (jsonwebtoken)
- **Password Hashing**: bcryptjs
- **File Uploads**: Multer
- **CORS**: cors middleware
- **Environment**: dotenv

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É

```
backend/
‚îú‚îÄ‚îÄ prisma/
‚îÇ   ‚îú‚îÄ‚îÄ schema.prisma          # –°—Ö–µ–º–∞ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö
‚îÇ   ‚îî‚îÄ‚îÄ seed.ts               # –ü–æ—á–∞—Ç–∫–æ–≤—ñ –¥–∞–Ω—ñ
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ routes/           # API —Ä–æ—É—Ç–∏ (15 —Ñ–∞–π–ª—ñ–≤)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ controllers/      # –ö–æ–Ω—Ç—Ä–æ–ª–µ—Ä–∏ (15 —Ñ–∞–π–ª—ñ–≤)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ services/         # –ë—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫–∞ (15 —Ñ–∞–π–ª—ñ–≤)
‚îÇ   ‚îú‚îÄ‚îÄ middleware/           # Middleware (auth, validation)
‚îÇ   ‚îú‚îÄ‚îÄ config/               # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è (database, env)
‚îÇ   ‚îú‚îÄ‚îÄ types/                # TypeScript —Ç–∏–ø–∏
‚îÇ   ‚îî‚îÄ‚îÄ index.ts              # –ì–æ–ª–æ–≤–Ω–∏–π —Ñ–∞–π–ª —Å–µ—Ä–≤–µ—Ä–∞
‚îú‚îÄ‚îÄ uploads/                  # –ü–∞–ø–∫–∞ –¥–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–∏—Ö —Ñ–∞–π–ª—ñ–≤
‚îú‚îÄ‚îÄ .env.example              # –ü—Ä–∏–∫–ª–∞–¥ –∑–º—ñ–Ω–Ω–∏—Ö —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞
‚îú‚îÄ‚îÄ package.json              # –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ —Ç–∞ —Å–∫—Ä–∏–ø—Ç–∏
‚îú‚îÄ‚îÄ tsconfig.json             # TypeScript –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
‚îú‚îÄ‚îÄ start.sh                  # –°–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫—É (Linux/Mac)
‚îú‚îÄ‚îÄ start.bat                 # –°–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫—É (Windows)
‚îî‚îÄ‚îÄ README.md                 # –û—Å–Ω–æ–≤–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è
```

## üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö

### Prisma Schema

–°—Ö–µ–º–∞ –≤–∫–ª—é—á–∞—î **25 –º–æ–¥–µ–ª–µ–π** –∑ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∏–º–∏ –∑–≤'—è–∑–∫–∞–º–∏:

#### –û—Å–Ω–æ–≤–Ω—ñ –º–æ–¥–µ–ª—ñ
- **Manager** - –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ —Å–∏—Å—Ç–µ–º–∏ –∑ —Ä–æ–ª—è–º–∏ (admin, head, manager)
- **Counterparty** - –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∏ (–∫–ª—ñ—î–Ω—Ç–∏, –ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫–∏)
- **Product** - —Ç–æ–≤–∞—Ä–∏ –∑ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è–º –∑–∞–ª–∏—à–∫–∞–º–∏
- **Service** - –ø–æ—Å–ª—É–≥–∏
- **Project** - –ø—Ä–æ–µ–∫—Ç–∏ –∑ –±–∞–≥–∞—Ç—å–º–∞ –º–µ–Ω–µ–¥–∂–µ—Ä–∞–º–∏
- **SubProject** - –ø—ñ–¥–ø—Ä–æ–µ–∫—Ç–∏
- **Task** - –∑–∞–≤–¥–∞–Ω–Ω—è
- **Sale** - –ø—Ä–æ–¥–∞–∂—ñ –∑ —Ç–æ–≤–∞—Ä–∞–º–∏ —Ç–∞ –ø–æ—Å–ª—É–≥–∞–º–∏

#### –î–æ–ø–æ–º—ñ–∂–Ω—ñ –º–æ–¥–µ–ª—ñ
- **Unit** - –æ–¥–∏–Ω–∏—Ü—ñ –≤–∏–º—ñ—Ä—É
- **Warehouse** - —Å–∫–ª–∞–¥–∏
- **ProductStock** - –∑–∞–ª–∏—à–∫–∏ —Ç–æ–≤–∞—Ä—ñ–≤ –Ω–∞ —Å–∫–ª–∞–¥–∞—Ö
- **Funnel** —Ç–∞ **FunnelStage** - –≤–æ—Ä–æ–Ω–∫–∏ –ø—Ä–æ–¥–∞–∂—ñ–≤
- **ProjectComment** —Ç–∞ **SubProjectComment** - –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ –∑ —Ñ–∞–π–ª–∞–º–∏

#### –ó–≤'—è–∑–∫–∏
- **Self-referencing** –¥–ª—è Manager (supervisors/subordinates)
- **Many-to-many** —á–µ—Ä–µ–∑ join —Ç–∞–±–ª–∏—Ü—ñ (ProjectManager, SaleProduct, SaleService)
- **One-to-many** –¥–ª—è –æ—Å–Ω–æ–≤–Ω–∏—Ö –∑–≤'—è–∑–∫—ñ–≤
- **Cascade delete** –¥–ª—è –∑–∞–ª–µ–∂–Ω–∏—Ö –∑–∞–ø–∏—Å—ñ–≤

### –ü–æ—á–∞—Ç–∫–æ–≤—ñ –¥–∞–Ω—ñ

Seed —Å–∫—Ä–∏–ø—Ç —Å—Ç–≤–æ—Ä—é—î:
- **5 –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤** –∑ —Ä—ñ–∑–Ω–∏–º–∏ —Ä–æ–ª—è–º–∏
- **3 –æ–¥–∏–Ω–∏—Ü—ñ –≤–∏–º—ñ—Ä—É** (—à—Ç, –∫–≥, –º)
- **2 —Å–∫–ª–∞–¥–∏** (–ì–æ–ª–æ–≤–Ω–∏–π, –†–µ–≥—ñ–æ–Ω–∞–ª—å–Ω–∏–π)
- **10 —Ç–æ–≤–∞—Ä—ñ–≤** –∑ –∑–∞–ª–∏—à–∫–∞–º–∏
- **5 –ø–æ—Å–ª—É–≥**
- **3 –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∏**
- **2 –≤–æ—Ä–æ–Ω–∫–∏ –ø—Ä–æ–¥–∞–∂—ñ–≤** –∑ –µ—Ç–∞–ø–∞–º–∏
- **3 –ø—Ä–æ–µ–∫—Ç–∏** –∑ –ø—ñ–¥–ø—Ä–æ–µ–∫—Ç–∞–º–∏ —Ç–∞ –∑–∞–≤–¥–∞–Ω–Ω—è–º–∏
- **5 –ø—Ä–æ–¥–∞–∂—ñ–≤** –∑ —Ç–æ–≤–∞—Ä–∞–º–∏ —Ç–∞ –ø–æ—Å–ª—É–≥–∞–º–∏
- **10 –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ–≤** –∑ —Ñ–∞–π–ª–∞–º–∏

## üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è —Ç–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è

### JWT Authentication

- **–¢–æ–∫–µ–Ω–∏** –∑ —Ç–µ—Ä–º—ñ–Ω–æ–º –¥—ñ—ó 24 –≥–æ–¥–∏–Ω–∏
- **–•–µ—à—É–≤–∞–Ω–Ω—è –ø–∞—Ä–æ–ª—ñ–≤** –∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º bcrypt
- **Middleware** –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ —Ç–æ–∫–µ–Ω—ñ–≤ –Ω–∞ –≤—Å—ñ—Ö –∑–∞—Ö–∏—â–µ–Ω–∏—Ö –º–∞—Ä—à—Ä—É—Ç–∞—Ö

### Role-Based Access Control (RBAC)

- **admin** - –ø–æ–≤–Ω–∏–π –¥–æ—Å—Ç—É–ø –¥–æ –≤—Å—ñ—Ö –¥–∞–Ω–∏—Ö
- **head** - –¥–æ—Å—Ç—É–ø –¥–æ —Å–≤–æ—ó—Ö –¥–∞–Ω–∏—Ö + –¥–∞–Ω—ñ –ø—ñ–¥–ª–µ–≥–ª–∏—Ö
- **manager** - –¥–æ—Å—Ç—É–ø —Ç—ñ–ª—å–∫–∏ –¥–æ —Å–≤–æ—ó—Ö –¥–∞–Ω–∏—Ö

### –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è –≤ —Å–µ—Ä–≤—ñ—Å–∞—Ö

–õ–æ–≥—ñ–∫–∞ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó –¥–∞–Ω–∏—Ö —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–∞ –≤ —Å–µ—Ä–≤—ñ—Å–Ω–æ–º—É —à–∞—Ä—ñ:
- `ManagerService` - —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è –ø–æ —Ä–æ–ª—è—Ö —Ç–∞ –ø—ñ–¥–ª–µ–≥–ª–∏—Ö
- `ProjectService` - –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≥–æ–ª–æ–≤–Ω–æ–≥–æ —Ç–∞ –¥—Ä—É–≥–æ—Ä—è–¥–Ω–∏—Ö –º–µ–Ω–µ–¥–∂–µ—Ä—ñ–≤
- `SaleService` - —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è –ø–æ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω–æ–º—É –º–µ–Ω–µ–¥–∂–µ—Ä—É
- `TaskService` - —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è –ø–æ —Å—Ç–≤–æ—Ä—é–≤–∞—á—É —Ç–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω–æ–º—É

## üåê API Endpoints

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è
- `POST /api/auth/login` - –≤—Ö—ñ–¥ –≤ —Å–∏—Å—Ç–µ–º—É
- `POST /api/auth/logout` - –≤–∏—Ö—ñ–¥ –∑ —Å–∏—Å—Ç–µ–º–∏
- `GET /api/auth/me` - –ø–æ—Ç–æ—á–Ω–∏–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á

### CRUD –æ–ø–µ—Ä–∞—Ü—ñ—ó –¥–ª—è –≤—Å—ñ—Ö —Å—É—Ç–Ω–æ—Å—Ç–µ–π
- `GET /api/[entity]` - —Å–ø–∏—Å–æ–∫ –∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—î—é
- `GET /api/[entity]/:id` - –æ–¥–∏–Ω –µ–ª–µ–º–µ–Ω—Ç
- `POST /api/[entity]` - —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è
- `PUT /api/[entity]/:id` - –æ–Ω–æ–≤–ª–µ–Ω–Ω—è
- `DELETE /api/[entity]/:id` - –≤–∏–¥–∞–ª–µ–Ω–Ω—è

### –°–ø–µ—Ü—ñ–∞–ª—å–Ω—ñ endpoints
- `POST /api/products/:id/stock` - –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–∏—à–∫—ñ–≤ —Ç–æ–≤–∞—Ä—É
- `POST /api/upload` - –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤
- `DELETE /api/upload` - –≤–∏–¥–∞–ª–µ–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤

### Data Enrichment

–í—Å—ñ API –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –≤–∫–ª—é—á–∞—é—Ç—å –ø–æ–≤'—è–∑–∞–Ω—ñ –¥–∞–Ω—ñ:
- –ú–µ–Ω–µ–¥–∂–µ—Ä–∏ –≤–∫–ª—é—á–∞—é—Ç—å supervisors —Ç–∞ subordinates
- –ü—Ä–æ–µ–∫—Ç–∏ –≤–∫–ª—é—á–∞—é—Ç—å –≤—Å—ñ –ø–æ–≤'—è–∑–∞–Ω—ñ —Å—É—Ç–Ω–æ—Å—Ç—ñ
- –ü—Ä–æ–¥–∞–∂—ñ –≤–∫–ª—é—á–∞—é—Ç—å —Ç–æ–≤–∞—Ä–∏, –ø–æ—Å–ª—É–≥–∏ —Ç–∞ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç—ñ–≤
- –ö–æ–º–µ–Ω—Ç–∞—Ä—ñ –≤–∫–ª—é—á–∞—é—Ç—å –¥–∞–Ω—ñ –º–µ–Ω–µ–¥–∂–µ—Ä–∞

## üìÅ –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤

### Multer Middleware

- **Memory storage** –¥–ª—è –æ–±—Ä–æ–±–∫–∏ —Ñ–∞–π–ª—ñ–≤
- **–í–∞–ª—ñ–¥–∞—Ü—ñ—è —Ç–∏–ø—ñ–≤** —Ñ–∞–π–ª—ñ–≤ (PDF, DOC, XLS, –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è, —Ç–µ–∫—Å—Ç)
- **–û–±–º–µ–∂–µ–Ω–Ω—è —Ä–æ–∑–º—ñ—Ä—É** (10MB –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º)
- **–£–Ω—ñ–∫–∞–ª—å–Ω—ñ —ñ–º–µ–Ω–∞** —Ñ–∞–π–ª—ñ–≤ –∑ timestamp

### –§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å

- **–ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è** —Ñ–∞–π–ª—ñ–≤ –≤ –ø–∞–ø–∫—É `uploads/`
- **–°—Ç–∞—Ç–∏—á–Ω–µ –æ–±—Å–ª—É–≥–æ–≤—É–≤–∞–Ω–Ω—è** —á–µ—Ä–µ–∑ `/uploads/` endpoint
- **–í–∏–¥–∞–ª–µ–Ω–Ω—è** —Ñ–∞–π–ª—ñ–≤ –∑ —Ñ–∞–π–ª–æ–≤–æ—ó —Å–∏—Å—Ç–µ–º–∏
- **–Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è** –∑ –∫–æ–º–µ–Ω—Ç–∞—Ä—è–º–∏ –ø—Ä–æ–µ–∫—Ç—ñ–≤ —Ç–∞ –ø—ñ–¥–ø—Ä–æ–µ–∫—Ç—ñ–≤

## üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### –ê–≤—Ç–æ–º–∞—Ç–∏–∑–æ–≤–∞–Ω–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

- **Jest** –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –¥–ª—è TypeScript
- **Supertest** –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è API endpoints
- **–¢–µ—Å—Ç–∏** –¥–ª—è –≤—Å—ñ—Ö –æ—Å–Ω–æ–≤–Ω–∏—Ö —Ñ—É–Ω–∫—Ü—ñ–π
- **Coverage** –∑–≤—ñ—Ç–∏

### –†—É—á–Ω–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

- **curl** –∫–æ–º–∞–Ω–¥–∏ –¥–ª—è –≤—Å—ñ—Ö endpoints
- **Postman** –∫–æ–ª–µ–∫—Ü—ñ—è –∑ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—î—é
- **–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è** –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó —Ç–∞ —Ä–æ–ª–µ–π
- **–í–∞–ª—ñ–¥–∞—Ü—ñ—è** –ø–æ–º–∏–ª–æ–∫ —Ç–∞ edge cases

### Load testing

- **Artillery** –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ
- **Memory leak** —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è
- **Security** —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è (SQL injection, XSS)

## üöÄ –†–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è

### –í–∞—Ä—ñ–∞–Ω—Ç–∏ —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è

1. **VPS/Cloud Server** –∑ PM2
2. **Docker** –∑ docker-compose
3. **Heroku** –∑ PostgreSQL addon

### –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

- **Nginx** —è–∫ reverse proxy
- **SSL —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∏** –∑ Let's Encrypt
- **Firewall** –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
- **Backup** —Å–∫—Ä–∏–ø—Ç–∏ –¥–ª—è –±–∞–∑–∏ –¥–∞–Ω–∏—Ö —Ç–∞ —Ñ–∞–π–ª—ñ–≤

### –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥

- **PM2** –¥–ª—è —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –ø—Ä–æ—Ü–µ—Å–∞–º–∏
- **–õ–æ–≥—É–≤–∞–Ω–Ω—è** –∑ Winston –∞–±–æ Pino
- **Health checks** –¥–ª—è –≤—Å—ñ—Ö —Å–µ—Ä–≤—ñ—Å—ñ–≤

## üîß –†–æ–∑—Ä–æ–±–∫–∞

### –°–∫—Ä–∏–ø—Ç–∏

```bash
# –†–æ–∑—Ä–æ–±–∫–∞
npm run dev              # –ó–∞–ø—É—Å–∫ –∑ tsx watch
npm run build            # –ó–±—ñ—Ä–∫–∞ TypeScript
npm start                # –ó–∞–ø—É—Å–∫ –ø—Ä–æ–¥–∞–∫—à–Ω –≤–µ—Ä—Å—ñ—ó

# –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö
npm run db:generate      # –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è Prisma –∫–ª—ñ—î–Ω—Ç–∞
npm run db:push          # –ó–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è —Å—Ö–µ–º–∏
npm run db:migrate       # –ú—ñ–≥—Ä–∞—Ü—ñ—ó
npm run db:seed          # –ó–∞–ø–æ–≤–Ω–µ–Ω–Ω—è –¥–∞–Ω–∏–º–∏
npm run db:studio        # Prisma Studio
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–¥—É

- **Services** - –±—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫–∞ —Ç–∞ —Ä–æ–±–æ—Ç–∞ –∑ Prisma
- **Controllers** - –æ–±—Ä–æ–±–∫–∞ HTTP –∑–∞–ø–∏—Ç—ñ–≤
- **Routes** - –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è API endpoints
- **Middleware** - –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è —Ç–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—è
- **Types** - TypeScript —Ç–∏–ø–∏ —Ç–∞ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∏

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

### –û—Å–Ω–æ–≤–Ω—ñ —Ñ–∞–π–ª–∏

- **README.md** - –∑–∞–≥–∞–ª—å–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è —Ç–∞ —à–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç
- **SETUP.md** - –¥–µ—Ç–∞–ª—å–Ω—ñ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó –ø–æ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—é
- **API_EXAMPLES.md** - –ø—Ä–∏–∫–ª–∞–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è API
- **DEPLOYMENT.md** - —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó –ø–æ —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—é
- **TESTING.md** - —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è —Ç–∞ –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
- **FRONTEND_INTEGRATION.md** - –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—É

### –ü—Ä–∏–∫–ª–∞–¥–∏ –∫–æ–¥—É

- **curl** –∫–æ–º–∞–Ω–¥–∏ –¥–ª—è –≤—Å—ñ—Ö endpoints
- **TypeScript** –ø—Ä–∏–∫–ª–∞–¥–∏ –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—É
- **Docker** –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó
- **Nginx** –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

## üîí –ë–µ–∑–ø–µ–∫–∞

### –ó–∞—Ö–∏—Å—Ç

- **JWT —Ç–æ–∫–µ–Ω–∏** –∑ —Ç–µ—Ä–º—ñ–Ω–æ–º –¥—ñ—ó
- **–•–µ—à—É–≤–∞–Ω–Ω—è –ø–∞—Ä–æ–ª—ñ–≤** –∑ bcrypt
- **CORS** –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
- **–í–∞–ª—ñ–¥–∞—Ü—ñ—è** —Ç–∏–ø—ñ–≤ —Ñ–∞–π–ª—ñ–≤
- **–û–±–º–µ–∂–µ–Ω–Ω—è —Ä–æ–∑–º—ñ—Ä—É** —Ñ–∞–π–ª—ñ–≤

### –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è

- **Middleware** –¥–ª—è –≤—Å—ñ—Ö –∑–∞—Ö–∏—â–µ–Ω–∏—Ö –º–∞—Ä—à—Ä—É—Ç—ñ–≤
- **Role-based** –¥–æ—Å—Ç—É–ø –¥–æ –¥–∞–Ω–∏—Ö
- **–§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è** —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ –ø–æ —Ä–æ–ª—è—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞

## üìä –ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å

### –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è

- **Prisma** –¥–ª—è –µ—Ñ–µ–∫—Ç–∏–≤–Ω–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤
- **Include** –¥–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –ø–æ–≤'—è–∑–∞–Ω–∏—Ö –¥–∞–Ω–∏—Ö
- **Singleton** PrismaClient –¥–ª—è –∑'—î–¥–Ω–∞–Ω—å
- **Memory storage** –¥–ª—è —Ñ–∞–π–ª—ñ–≤

### –ú–∞—Å—à—Ç–∞–±—É–≤–∞–Ω–Ω—è

- **–ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–µ** —á–µ—Ä–µ–∑ load balancer
- **–í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–µ** —á–µ—Ä–µ–∑ –∑–±—ñ–ª—å—à–µ–Ω–Ω—è —Ä–µ—Å—É—Ä—Å—ñ–≤
- **–ö–µ—à—É–≤–∞–Ω–Ω—è** –∑ Redis (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)
- **Shared storage** –¥–ª—è —Ñ–∞–π–ª—ñ–≤

## üåü –û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ

### –£–Ω—ñ–∫–∞–ª—å–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó

1. **Self-referencing** –∑–≤'—è–∑–∫–∏ –¥–ª—è –º–µ–Ω–µ–¥–∂–µ—Ä—ñ–≤
2. **Many-to-many** –∑–≤'—è–∑–∫–∏ —á–µ—Ä–µ–∑ join —Ç–∞–±–ª–∏—Ü—ñ
3. **File uploads** –∑ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—î—é –≤ –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ
4. **Role-based** —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è –¥–∞–Ω–∏—Ö
5. **Data enrichment** –≤ —É—Å—ñ—Ö API –≤—ñ–¥–ø–æ–≤—ñ–¥—è—Ö

### –í—ñ–¥–ø–æ–≤—ñ–¥–Ω—ñ—Å—Ç—å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—É

- **–¢–æ—á–Ω–µ** –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—ñ—Å—Ç—å —Ç–∏–ø–∞–º –∑ `types.ts`
- **–ü–æ–≤–Ω–∞** —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –ª–æ–≥—ñ–∫–∏ –∑ `services/api.ts`
- **–ë–µ–∑ –∑–º—ñ–Ω** –Ω–∞ —Å—Ç–æ—Ä–æ–Ω—ñ –∫–ª—ñ—î–Ω—Ç–∞
- **–¢–µ—Å—Ç–æ–≤—ñ –¥–∞–Ω—ñ** –∑ –º–æ–∫-—Å–µ—Ä–≤–µ—Ä–∞

## üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç

–°—Ç–≤–æ—Ä–µ–Ω–æ **–ø–æ–≤–Ω–æ—Ü—ñ–Ω–Ω–∏–π CRM Backend**, —è–∫–∏–π:

‚úÖ **–í—ñ–¥–ø–æ–≤—ñ–¥–∞—î** –≤—Å—ñ–º –≤–∏–º–æ–≥–∞–º –∑–∞–≤–¥–∞–Ω–Ω—è  
‚úÖ **–Ü–Ω—Ç–µ–≥—Ä—É—î—Ç—å—Å—è** –∑ —ñ—Å–Ω—É—é—á–∏–º —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–æ–º  
‚úÖ **–ì–æ—Ç–æ–≤–∏–π** –¥–æ –∑–∞–ø—É—Å–∫—É —Ç–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è  
‚úÖ **–ú–∞—Å—à—Ç–∞–±–æ–≤–∞–Ω–∏–π** –¥–ª—è –ø–æ–¥–∞–ª—å—à–æ–≥–æ —Ä–æ–∑–≤–∏—Ç–∫—É  
‚úÖ **–ë–µ–∑–ø–µ—á–Ω–∏–π** –∑ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—é –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—î—é  
‚úÖ **–î–æ–∫—É–º–µ–Ω—Ç–æ–≤–∞–Ω–∏–π** –∑ –¥–µ—Ç–∞–ª—å–Ω–∏–º–∏ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è–º–∏  

### –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç

```bash
# 1. –ö–ª–æ–Ω—É–≤–∞–Ω–Ω—è —Ç–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
git clone <repo>
cd backend
cp .env.example .env
# –ù–∞–ª–∞—à—Ç—É–π—Ç–µ DATABASE_URL —Ç–∞ JWT_SECRET

# 2. –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ë–î
npm install
npm run db:generate
npm run db:push
npm run db:seed

# 3. –ó–∞–ø—É—Å–∫
npm run dev
```

### –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

```bash
# Health check
curl http://localhost:3001/health

# –õ–æ–≥—ñ–Ω
curl -X POST http://localhost:3001/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"email":"admin@example.com","password":"admin123"}'
```

–ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤–∏–π –¥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Ç–∞ –ø–æ–¥–∞–ª—å—à–æ–≥–æ —Ä–æ–∑–≤–∏—Ç–∫—É! üöÄ
