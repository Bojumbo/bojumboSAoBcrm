@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --glass-bg: rgba(255, 255, 255, 0.08);
  --glass-border: rgba(255, 255, 255, 0.25);
  --glass-shadow: rgba(0, 0, 0, 0.35);
  --glass-tint: rgba(255, 255, 255, 0.06);
  --glass-reflection: rgba(255, 255, 255, 0.18);
  --glass-hdr: rgba(255, 255, 255, 0.25);

  /* Scrollbar theme */
  --scrollbar-thumb: rgba(255, 255, 255, 0.35);
  --scrollbar-thumb-hover: rgba(255, 255, 255, 0.55);
  --scrollbar-border: rgba(255, 255, 255, 0.25);
  --scrollbar-size: 10px;
}

@media (prefers-color-scheme: dark) {
  :root {
    --glass-bg: rgba(0, 0, 0, 0.35);
    --glass-border: rgba(255, 255, 255, 0.1);
    --glass-shadow: rgba(0, 0, 0, 0.6);
    --glass-tint: rgba(0, 0, 0, 0.2);
    --glass-reflection: rgba(255, 255, 255, 0.08);
    --glass-hdr: rgba(255, 255, 255, 0.2);

  --scrollbar-thumb: rgba(255, 255, 255, 0.28);
  --scrollbar-thumb-hover: rgba(255, 255, 255, 0.45);
  --scrollbar-border: rgba(255, 255, 255, 0.18);
  }
}

/* Subtle animated gradient background */
body {
  /* Background image from project root with a subtle dark overlay for contrast */
  background:
    linear-gradient(rgba(11,16,32,0.55), rgba(11,16,32,0.55)),
    url('../backgrounddark.jpg');
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  background-attachment: fixed;
  min-height: 100vh;
  max-width: 100vw;
  overflow-x: hidden; /* prevent global horizontal scroll; local scrollers still work */
}

/* Glassy scrollbars (WebKit + Firefox) */
body, .glass, .glass-scrollbar {
  scrollbar-width: thin; /* Firefox */
  scrollbar-color: var(--scrollbar-thumb) transparent; /* Firefox */
}

body::-webkit-scrollbar,
.glass::-webkit-scrollbar,
.glass-scrollbar::-webkit-scrollbar {
  width: var(--scrollbar-size);
  height: var(--scrollbar-size);
}

body::-webkit-scrollbar-track,
.glass::-webkit-scrollbar-track,
.glass-scrollbar::-webkit-scrollbar-track {
  background: transparent;
}

body::-webkit-scrollbar-thumb,
.glass::-webkit-scrollbar-thumb,
.glass-scrollbar::-webkit-scrollbar-thumb {
  background-color: var(--scrollbar-thumb);
  border-radius: 9999px;
  border: 2px solid transparent; /* creates a pill look */
  background-clip: padding-box;
  box-shadow: inset 0 0 0 1px var(--scrollbar-border);
}

body::-webkit-scrollbar-thumb:hover,
.glass::-webkit-scrollbar-thumb:hover,
.glass-scrollbar::-webkit-scrollbar-thumb:hover {
  background-color: var(--scrollbar-thumb-hover);
}

/* Liquid Glass core (6 layers): shadow, hdr, lens, tint, reflections, content */
.glass {
  position: relative;
  border-radius: 16px;
  overflow: hidden;
  border: 1px solid var(--glass-border);
  background: var(--glass-bg);
  backdrop-filter: blur(18px) saturate(120%) contrast(110%);
  -webkit-backdrop-filter: blur(18px) saturate(120%) contrast(110%);
  box-shadow: 0 10px 30px var(--glass-shadow);
  transition: transform 280ms cubic-bezier(.2,.7,.2,1), box-shadow 280ms cubic-bezier(.2,.7,.2,1), background 200ms ease;
  color: rgba(255,255,255,0.96);
}

/* Opt-in scroll overrides for glass containers (overrides base overflow:hidden) */
.glass.glass-scroll { overflow: auto; }
.glass.glass-scroll-y { overflow-y: auto; }
.glass.glass-scroll-x { overflow-x: auto; }

/* 1) Shadow: adaptive separation */
.glass::before {
  content: "";
  position: absolute;
  inset: -20% -20%;
  background: radial-gradient(70% 70% at var(--mx, 50%) var(--my, 50%), rgba(0,0,0,0.25), transparent 60%);
  filter: blur(20px);
  opacity: 0.35;
  pointer-events: none;
}

/* 2) HDR backlight on interaction */
.glass:hover {
  box-shadow: 0 20px 50px var(--glass-shadow);
}
.glass:hover .glass-hdr { opacity: 0.4; }
.glass:active { transform: translateY(1px) scale(0.997); }

.glass-hdr {
  content: "";
  position: absolute;
  inset: 0;
  background: radial-gradient(60% 60% at var(--mx, 50%) var(--my, 50%), var(--glass-hdr), transparent 70%);
  mix-blend-mode: screen;
  opacity: 0.0;
  transition: opacity 200ms ease;
  pointer-events: none;
}

/* 3) Lens: subtle distortion via additional blur pocket */
.glass-lens {
  content: "";
  position: absolute;
  inset: -10%;
  background: radial-gradient(35% 35% at calc(var(--mx, 50%)) calc(var(--my, 50%)), rgba(255,255,255,0.12), transparent 70%);
  filter: blur(8px);
  opacity: 0.5;
  pointer-events: none;
}

/* 4) Tint: dynamic contrast safety */
.glass-tint {
  content: "";
  position: absolute;
  inset: 0;
  background: linear-gradient(180deg, var(--glass-tint), transparent 60%);
  mix-blend-mode: luminosity;
  pointer-events: none;
}

/* 5) Reflections: glossy highlights reacting to pointer */
.glass-reflect {
  content: "";
  position: absolute;
  inset: -30%;
  background:
    radial-gradient(400px 200px at calc(var(--mx, 50%)) calc(var(--my, 50%) - 120px), var(--glass-reflection), transparent 60%),
    conic-gradient(from 180deg at var(--mx, 50%) var(--my, 50%), rgba(255,255,255,0.06), rgba(255,255,255,0.0) 25%, rgba(255,255,255,0.06) 50%, rgba(255,255,255,0.0) 75%, rgba(255,255,255,0.06) 100%);
  opacity: 0.5;
  filter: blur(10px) saturate(120%);
  pointer-events: none;
}

/* Respect preferences toggles from PrefsProvider */
body.no-reflections .glass-reflect { display: none; }
body.reduced-motion *, body.reduced-motion .glass {
  transition: none !important;
  animation: none !important;
}

/* 6) Content: sits above */
.glass-content { position: relative; z-index: 2; }

/* Utility helpers */
.glass-interactive { cursor: pointer; }

.page-container {
  min-height: 100vh;
  color: white;
  overflow-x: hidden; /* guardrail at app shell */
}

/* Lighter glass variant for bright panels (e.g., drawers) */
.glass-light {
  /* Override variables to a brighter palette */
  --glass-bg: rgba(255, 255, 255, 0.22);
  --glass-border: rgba(255, 255, 255, 0.38);
  --glass-tint: rgba(255, 255, 255, 0.12);
  --glass-reflection: rgba(255, 255, 255, 0.28);
  --glass-hdr: rgba(255, 255, 255, 0.35);
  backdrop-filter: blur(20px) saturate(130%) contrast(110%) brightness(1.05);
  -webkit-backdrop-filter: blur(20px) saturate(130%) contrast(110%) brightness(1.05);
}

/* Ultra-light, almost transparent variant for overlay panels */
.glass-ultra {
  --glass-bg: rgba(255, 255, 255, 0.06);
  --glass-border: rgba(255, 255, 255, 0.16);
  --glass-tint: rgba(255, 255, 255, 0.08);
  --glass-reflection: rgba(255, 255, 255, 0.18);
  --glass-hdr: rgba(255, 255, 255, 0.22);
  backdrop-filter: blur(20px) saturate(120%) contrast(105%) brightness(1.0);
  -webkit-backdrop-filter: blur(20px) saturate(120%) contrast(105%) brightness(1.0);
}

/* Input/textarea glass variant â€” more transparent and slightly darker */
.glass-input {
  background: rgba(0, 0, 0, 0.28);
  border: 1px solid rgba(255, 255, 255, 0.18);
  color: #fff;
  backdrop-filter: blur(12px) saturate(120%);
  -webkit-backdrop-filter: blur(12px) saturate(120%);
  transition: border-color 180ms ease, box-shadow 180ms ease, background-color 180ms ease;
}
.glass-input::placeholder { color: rgba(255,255,255,0.55); }
.glass-input:focus {
  outline: none;
  border-color: rgba(255, 255, 255, 0.35);
  box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.08);
  background: rgba(0, 0, 0, 0.32);
}
